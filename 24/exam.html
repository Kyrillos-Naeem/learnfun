<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>موقع الامتحان</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="logo.png" type="image/x-icon">
    <style>
        :root {
            --primary-color: #2196F3;
            --primary-dark: #1976D2;
            --success-color: #4CAF50;
            --error-color: #f44336;
            --warning-color: #ff9800;
            --background-color: #121212;
            --card-background: #1e1e1e;
            --text-color: #e0e0e0;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            --option-bg: #2d2d2d;
            --option-hover: #3d3d3d;
            --option-border: #404040;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(33, 150, 243, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(33, 150, 243, 0.1) 0%, transparent 20%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .exam-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--option-border);
            grid-column: 1 / -1;
        }

        .exam-header h1 {
            color: var(--primary-color);
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .exam-info {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: var(--option-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--option-border);
        }

        .info-item {
            text-align: center;
            padding: 10px;
            border-radius: var(--border-radius);
            background: rgba(33, 150, 243, 0.1);
        }

        .info-item i {
            color: var(--primary-color);
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .timer {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--warning-color);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .sidebar {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            border: 1px solid var(--option-border);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .question-nav {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .nav-item {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--option-bg);
            border: 1px solid var(--option-border);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9em;
        }

        .nav-item:hover {
            background: var(--option-hover);
            transform: translateY(-2px);
        }

        .nav-item.current {
            background: var(--primary-color);
            color: white;
        }

        .nav-item.answered {
            background: rgba(33, 150, 243, 0.2);
            border-color: var(--primary-color);
        }

        .main-content {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--box-shadow);
            border: 1px solid var(--option-border);
        }

        .progress-container {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--option-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--option-border);
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: var(--option-bg);
            border-radius: 6px;
            margin: 10px 0;
            overflow: hidden;
            border: 1px solid var(--option-border);
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--primary-color);
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9em;
            color: var(--text-color);
        }

        .question {
            background: var(--card-background);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border: 1px solid var(--option-border);
            position: relative;
            display: none;
        }

        .question.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .question-number {
            position: absolute;
            top: -15px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .question h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.2em;
            padding-right: 20px;
        }

        .options {
            margin-top: 20px;
        }

        .option-label {
            display: block;
            padding: 15px 20px;
            margin-bottom: 12px;
            background: var(--option-bg);
            border: 2px solid var(--option-border);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .option-label:hover {
            background: var(--option-hover);
            border-color: var(--primary-color);
            transform: translateX(-5px);
        }

        .option-label input[type="radio"] {
            margin-left: 10px;
            transform: scale(1.2);
            accent-color: var(--primary-color);
        }

        .option-label.selected {
            background: rgba(33, 150, 243, 0.1);
            border-color: var(--primary-color);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }

        .nav-button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prev-button {
            background: var(--option-bg);
            color: var(--text-color);
        }

        .next-button {
            background: var(--primary-color);
            color: white;
        }

        .submit-btn {
            background: linear-gradient(45deg, var(--success-color), #45a049);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 30px auto;
        }

        .nav-button:hover, .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .result {
            margin-top: 20px;
            padding: 25px;
            border-radius: var(--border-radius);
            animation: fadeIn 0.5s ease;
            background: var(--card-background);
            border: 1px solid var(--option-border);
            position: relative;
        }

        .result::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            border-radius: var(--border-radius) 0 0 var(--border-radius);
        }

        .correct {
            background-color: rgba(76, 175, 80, 0.1);
            border: 2px solid var(--success-color);
            color: var(--success-color);
        }

        .correct::before {
            background-color: var(--success-color);
        }

        .incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border: 2px solid var(--error-color);
            color: var(--error-color);
        }

        .incorrect::before {
            background-color: var(--error-color);
        }

        .summary {
            text-align: center;
            font-size: 1.2em;
            margin: 30px 0;
            padding: 30px;
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--option-border);
            animation: fadeIn 0.5s ease;
        }

        .summary h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .summary p {
            margin: 15px 0;
            color: var(--text-color);
            font-size: 1.1em;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--card-background);
            border: 8px solid var(--primary-color);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-color);
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid transparent;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                padding: 10px;
            }

            .exam-header {
                margin-bottom: 20px;
                padding: 15px;
            }

            .exam-header h1 {
                font-size: 1.8em;
            }

            .exam-info {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .info-item {
                width: 100%;
                padding: 8px;
            }

            .sidebar {
                position: relative;
                top: 0;
                margin-bottom: 20px;
            }

            .question-nav {
                grid-template-columns: repeat(5, 1fr);
                gap: 8px;
            }

            .nav-item {
                font-size: 0.8em;
                padding: 5px;
            }

            .main-content {
                padding: 15px;
            }

            .progress-container {
                padding: 15px;
                margin-bottom: 20px;
            }

            .question {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            .question h3 {
                font-size: 1.1em;
                padding-right: 15px;
            }

            .option-label {
                padding: 12px 15px;
                margin-bottom: 10px;
                font-size: 0.95em;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .nav-button {
                width: 100%;
                justify-content: center;
                padding: 10px 20px;
            }

            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .view-scores-btn {
                width: 100%;
                justify-content: center;
                padding: 12px 20px;
            }

            .confirmation-dialog {
                width: 90%;
                max-width: 320px;
                padding: 20px;
            }

            .confirmation-dialog h3 {
                font-size: 1.2em;
            }

            .confirmation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .confirm-btn, .cancel-btn {
                width: 100%;
                padding: 12px 20px;
            }

            .result {
                padding: 15px;
            }

            .result h3 {
                font-size: 1.1em;
            }

            .summary {
                padding: 20px;
            }

            .summary h2 {
                font-size: 1.5em;
            }

            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2em;
            }
        }

        @media (max-width: 480px) {
            .question-nav {
                grid-template-columns: repeat(4, 1fr);
            }

            .exam-header h1 {
                font-size: 1.5em;
            }

            .question-number {
                font-size: 0.8em;
                padding: 3px 10px;
            }

            .option-label {
                padding: 10px 12px;
                font-size: 0.9em;
            }

            .timer {
                font-size: 1.1em;
            }
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .view-scores-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 20px auto;
        }

        .view-scores-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .name-form {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-background);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
            border: 1px solid var(--option-border);
            width: 90%;
            max-width: 500px;
            animation: fadeIn 0.5s ease;
        }

        .name-form h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .name-form p {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .name-input-container {
            position: relative;
            margin-bottom: 25px;
        }

        .name-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--option-border);
            border-radius: var(--border-radius);
            background: var(--option-bg);
            color: var(--text-color);
            font-size: 1.2em;
            transition: var(--transition);
            text-align: center;
        }

        .name-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .name-input.error {
            border-color: var(--error-color);
            animation: shake 0.5s ease;
        }

        .error-message {
            color: var(--error-color);
            font-size: 0.9em;
            margin-top: 8px;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .start-exam-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 1.2em;
            margin-top: 10px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .start-exam-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .start-exam-btn:active {
            transform: translateY(0);
        }

        .start-exam-btn i {
            font-size: 1.2em;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @media (max-width: 768px) {
            .name-form {
                padding: 30px 20px;
            }

            .name-form h2 {
                font-size: 1.6em;
            }

            .name-input {
                font-size: 1.1em;
                padding: 12px 15px;
            }

            .start-exam-btn {
                padding: 12px 30px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="name-form" id="nameForm">
        <h2>مرحباً بك في امتحان التعليم الإلكتروني</h2>
        <p>الرجاء إدخال اسمك للبدء في الامتحان</p>
        <div class="name-input-container">
            <input type="text" class="name-input" id="studentName" placeholder="أدخل اسمك هنا" required>
            <div class="error-message" id="nameError">الرجاء إدخال اسم صحيح (3 أحرف على الأقل)</div>
        </div>
        <button class="start-exam-btn" id="startExamBtn">
            <i class="fas fa-play"></i>
            بدء الامتحان
        </button>
    </div>

    <div class="exam-content" id="examContent">
        <div class="container">
            <div class="exam-header">
                <h1>امتحان التعليم الإلكتروني</h1>
                <div class="exam-info">
                    <div class="info-item">
                        <i class="fas fa-clock"></i>
                        <div class="timer" id="timer">60:00</div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-question-circle"></i>
                        <div>عدد الأسئلة: 37</div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-star"></i>
                        <div>الدرجة الكلية: 37</div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <h3>الأسئلة</h3>
                <div class="question-nav" id="questionNav"></div>
            </div>

            <div class="main-content">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progressBar"></div>
                    </div>
                    <div class="progress-text">
                        <span>الأسئلة المتبقية</span>
                        <span id="progressText">0/37</span>
                    </div>
                </div>

    <form id="examForm">
        <div id="questionsContainer"></div>
                    <div class="navigation-buttons">
                        <button type="button" class="nav-button prev-button" id="prevButton">
                            <i class="fas fa-arrow-right"></i>
                            السابق
                        </button>
                        <button type="button" class="nav-button next-button" id="nextButton">
                            التالي
                            <i class="fas fa-arrow-left"></i>
                        </button>
                    </div>
                    <div class="action-buttons">
                        <button type="button" class="view-scores-btn" id="viewScoresBtn">
                            <i class="fas fa-list"></i>
                            عرض النتائج السابقة
                        </button>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-check-circle"></i>
                        إنهاء الامتحان
                    </button>
    </form>
    <div id="resultsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            // True/False questions
            {
                type: "tf",
                question: "التعليم الإلكتروني المعتمد على الحاسوب والشبكات يعتمد بشكل أساسي على نقل المعارف والمهارات عبر الحاسوب.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "من مميزات التعليم غير المتزامن أنه يسمح للطالب بمراجعة المحتوى حسب الحاجة وتخصيص تجربة التعلم وفقاً لاحتياجاته الفردية.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "يشير مصطلح \"التعليم الإلكتروني الموحد\" إلى نمط تعليمي يراعي الفروق الفردية بين جميع المتعلمين.",
                options: ["صح", "خطأ"],
                correctAnswer: "خطأ"
            },
            {
                type: "tf",
                question: "في التعليم الإلكتروني التفاعلي، لا يمكن للمعلمين أو الطلاب التواصل بحرية.",
                options: ["صح", "خطأ"],
                correctAnswer: "خطأ"
            },
            {
                type: "tf",
                question: "يعتبر الكتاب الإلكتروني مجرد نص مشابه للكتاب التقليدي في شكل رقمي ولا يمكن أن يتضمن وسائط متعددة.",
                options: ["صح", "خطأ"],
                correctAnswer: "خطأ"
            },
            {
                type: "tf",
                question: "من معايير تصميم صفحات الكتاب الإلكتروني مراعاة ترقيم الصفحات وسهولة تقليبها.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "الهدف الأساسي من الألعاب الإلكترونية المعتادة أو العادية هو التسلية وتتطلب مهارات خاصة ومعقدة من اللاعبين.",
                options: ["صح", "خطأ"],
                correctAnswer: "خطأ"
            },
            {
                type: "tf",
                question: "من مبررات استخدام الألعاب الإلكترونية في العملية التعليمية أنها تلبي احتياجات الجيل الجديد من المتعلمين المتألقين في استخدام التكنولوجيا الرقمية.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "الواقع المعزز تقنية غير تفاعلية.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "من مميزات استخدام الواقع المعزز في التعليم زيادة فهم المحتوى التعليمي والاحتفاظ بالمعلومات في الذاكرة لفترة طويلة.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "المحاكاة عبر الويب تقنية قياسية وليست تنبؤية.",
                options: ["صح", "خطأ"],
                correctAnswer: "خطأ"
            },
            {
                type: "tf",
                question: "المحاكاة عبر الويب يمكن أن تساعد المتعلمين على الاطّلاع على العلاقات المعقدة أو المهارات الخطيرة أو باهظة الثمن.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "المدونات أداة اتصال لا متزامنة.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "من مميزات المدونات إتاحة الفرصة للطلاب للتعبير عن أنفسهم والتواصل مع الآخرين عبر الإنترنت.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "بيئة التعلم الشخصية تتمحور حول المعلم بشكل أساسي.",
                options: ["صح", "خطأ"],
                correctAnswer: "خطأ"
            },
            {
                type: "tf",
                question: "توفر بيئات التعلم الشخصية للمتعلمين المرونة في اختيار الأدوات والطرق المختلفة لاستكمال تعلمهم.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "يمكن للمتعلم في بيئة التعلم الشخصية أن يشارك المحتوى أو خطط التعلم مع مستخدمين آخرين.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            {
                type: "tf",
                question: "البث المباشر أداة أحادية التفاعل.",
                options: ["صح", "خطأ"],
                correctAnswer: "صح"
            },
            // Multiple Choice questions
            {
                type: "mcq",
                question: "يُعرف التعليم الإلكتروني بأنه شكل من أشكال التعليم عن بعد يستخدم آليات اتصال حديثة مثل الحاسب وشبكات الإنترنت لإيصال المعلومات للمتعلمين بصورة سريعة وبتكلفة أقل. هذا التعريف يركز على:",
                options: [
                    "أ. التفاعل بين الطالب والمعلم",
                    "ب. مرونة المحتوى",
                    "ج. استخدام التكنولوجيا ووسائل الاتصال",
                    "د. النظريات التعليمية"
                ],
                correctAnswer: "ج. استخدام التكنولوجيا ووسائل الاتصال"
            },
            {
                type: "mcq",
                question: "أي مما يلي يعتبر من متطلبات التعليم الإلكتروني المرتبطة بالمؤسسة التعليمية؟",
                options: [
                    "أ. معرفة خصائص الطالب",
                    "ب. التخطيط الجيد للبرنامج",
                    "ج. توفير المعامل الإلكترونية وخدمات المكتبات الإلكترونية",
                    "د. تحديد دور أعضاء هيئة التدريس"
                ],
                correctAnswer: "ج. توفير المعامل الإلكترونية وخدمات المكتبات الإلكترونية"
            },
            {
                type: "mcq",
                question: "من أدوات التعليم الإلكتروني المتزامن التي تتيح الفرصة للتفاعل والمحادثة الجماعية وتبادل المعرفة:",
                options: [
                    "أ. البريد الإلكتروني",
                    "ب. المدونات",
                    "ج. مؤتمرات الفيديو",
                    "د. المنتديات"
                ],
                correctAnswer: "ج. مؤتمرات الفيديو"
            },
            {
                type: "mcq",
                question: "أي من خصائص التعليم الإلكتروني تشير إلى إتاحة أدوات الاتصال لكل متعلم فرصة الإدلاء برأيه دون حرج؟",
                options: [
                    "أ. الملاءمة",
                    "ب. الفاعلية",
                    "ج. التكافؤ",
                    "د. الترابط"
                ],
                correctAnswer: "ج. التكافؤ"
            },
            {
                type: "mcq",
                question: "يشير مصطلح \"المقررات الإلكترونية\" إلى محتوى تعليمي غني بمكونات الوسائط المتعددة التفاعلية. هذه المقررات يمكن أن تكون:",
                options: [
                    "أ. معتمدة فقط على شبكة الإنترنت",
                    "ب. غير معتمدة على شبكة الإنترنت فقط",
                    "ج. نصوص فقط",
                    "د. معتمدة أو غير معتمدة على شبكة الإنترنت"
                ],
                correctAnswer: "د. معتمدة أو غير معتمدة على شبكة الإنترنت"
            },
            {
                type: "mcq",
                question: "من وظائف المقررات الإلكترونية التي تتيح للمتعلم والمعلم التواصل في نفس اللحظة:",
                options: [
                    "أ. اللا تزامنية",
                    "ب. النقاش المتسلسل",
                    "ج. قدرات الوسائط المتعددة",
                    "د. التزامن"
                ],
                correctAnswer: "د. التزامن"
            },
            {
                type: "mcq",
                question: "نظام إدارة المقررات عبر الإنترنت هو عملية ديناميكية تقوم على إدارة كافة عمليات التعليم والتعلم. من مهام هذا النظام:",
                options: [
                    "أ. كتابة الكتب التقليدية",
                    "ب. إدارة المحتوى التعليمي",
                    "ج. تسجيل وجدولة وإتاحة المحتوى وتتبع أداء المتعلم",
                    "د. تصميم الألعاب التعليمية التقليدية"
                ],
                correctAnswer: "ج. تسجيل وجدولة وإتاحة المحتوى وتتبع أداء المتعلم"
            },
            {
                type: "mcq",
                question: "من مميزات الكتاب الإلكتروني مقارنة بالكتاب المطبوع:",
                options: [
                    "أ. القراءة من الشاشة مريحة للعين",
                    "ب. صعوبة وسرعة دخول المتعلم وخروجه منه",
                    "ج. إمكانية استرجاع النص بالكلمات المفتاحية وبأدوات البحث ضمن محتوياته",
                    "د. يتطلب أجهزة وبرمجيات معينة للقراءة (هذه ميزة للمطبوع وعيب للإلكتروني)"
                ],
                correctAnswer: "ج. إمكانية استرجاع النص بالكلمات المفتاحية وبأدوات البحث ضمن محتوياته"
            },
            {
                type: "mcq",
                question: "من خصائص الألعاب الإلكترونية التي تسمح للاعب باكتساب المعارف والمعلومات من خلال ممارستها:",
                options: [
                    "أ. مستوي الصعوبة",
                    "ب. واجهة المستخدم",
                    "ج. حفظ وتحميل اللعبة",
                    "د. المعلومات والقواعد"
                ],
                correctAnswer: "د. المعلومات والقواعد"
            },
            {
                type: "mcq",
                question: "تعرف هذه التقنية بأنها \"إضافة معلومات رقمية باستخدام طرق عرض رقمية للواقع الافتراضي على الواقع الحقيقي\". هذه التقنية هي:",
                options: [
                    "أ. الواقع الافتراضي",
                    "ب. الواقع المختلط",
                    "ج. المحاكاة",
                    "د. الواقع المعزز"
                ],
                correctAnswer: "د. الواقع المعزز"
            },
            {
                type: "mcq",
                question: "يجمع الواقع المعزز بين:",
                options: [
                    "أ. الواقع الافتراضي فقط",
                    "ب. الواقع الحقيقي فقط",
                    "ج. الواقع الحقيقي والواقع الافتراضي",
                    "د. المحاكاة والألعاب"
                ],
                correctAnswer: "ج. الواقع الحقيقي والواقع الافتراضي"
            },
            {
                type: "mcq",
                question: "من فوائد استخدام الواقع المعزز في التعليم:",
                options: [
                    "أ. تقليل دافعية الطالب",
                    "ب. جعل الخبرة التعليمية أقل متعة",
                    "ج. الاعتماد الكلي على الحفظ",
                    "د. زيادة الحماس العالي لدى الطالب ورغبتهم في إعادة التجربة"
                ],
                correctAnswer: "د. زيادة الحماس العالي لدى الطالب ورغبتهم في إعادة التجربة"
            },
            {
                type: "mcq",
                question: "من خصائص المحاكاة عبر الويب أنها تسمح للمتعلم بـ:",
                options: [
                    "أ. الاعتماد الكلي على المشاهدة فقط",
                    "ب. عدم التفاعل مع المعلومات المجردة",
                    "ج. القيام بالتجارب والأنشطة المختلفة باستخدام الويب",
                    "د. العمل فقط ضمن قواعد جامدة لا تسمح بالخطأ"
                ],
                correctAnswer: "ج. القيام بالتجارب والأنشطة المختلفة باستخدام الويب"
            },
            {
                type: "mcq",
                question: "أي من أنماط المحاكاة عبر الويب تتسم بالثبات نظراً لخطورتها، ومن أمثلتها نماذج محاكاة لتنفيذ عملية جراحية أو تنفيذ مصفاة نفط في حقل بترول:",
                options: [
                    "أ. المحاكاة الشخصية",
                    "ب. المحاكاة الديناميكية",
                    "ج. المحاكاة الاستاتيكية",
                    "د. المحاكاة العملية"
                ],
                correctAnswer: "د. المحاكاة العملية"
            },
            {
                type: "mcq",
                question: "تعرف هذه التقنية بأنها \"أداة اتصال لا متزامنة تعمل كمساحة خالية متاحة باستمرار على شبكة الإنترنت وترتبط بوصلات ذات علاقة بالموضوع المعروض وهي في الأساس متاحة لشخص واحد فقط بالرغم من إمكانية أن يشترك بها العديد من الأفراد\". هذه الأداة هي:",
                options: [
                    "أ. البريد الإلكتروني",
                    "ب. نظام إدارة المقررات",
                    "ج. المدونة",
                    "د. بيئة التعلم الشخصية"
                ],
                correctAnswer: "ج. المدونة"
            },
            {
                type: "mcq",
                question: "من أبرز مميزات المدونات:",
                options: [
                    "أ. أنها لا تسمح بحرية النشر",
                    "ب. أنها لا تشجع الطلاب على البحث على الإنترنت",
                    "ج. أنها أداة تواصل متزامنة",
                    "د. المساعدة على نشر ثقافة المجموعة وتبادل المعلومات والأفكار"
                ],
                correctAnswer: "د. المساعدة على نشر ثقافة المجموعة وتبادل المعلومات والأفكار"
            },
            {
                type: "mcq",
                question: "بيئة التعلم الشخصية هي بيئة تمكن الطالب من تولي مسؤولية تعلمه وتمنحه مرونة في اختيار الأدوات والمصادر المستخدمة. هذه البيئة تتمحور حول:",
                options: [
                    "أ. المناهج الدراسية",
                    "ب. التكنولوجيا المستخدمة",
                    "ج. المتعلم",
                    "د. المعلم"
                ],
                correctAnswer: "ج. المتعلم"
            },
            {
                type: "mcq",
                question: "من خصائص بيئات التعلم الشخصية التي تشير إلى قدرة المتعلم على التفاعل مع المستخدمين الآخرين عبر الإنترنت:",
                options: [
                    "أ. الشخصية",
                    "ب. المرونة",
                    "ج. الإبحار",
                    "د. الاجتماعية"
                ],
                correctAnswer: "د. الاجتماعية"
            },
            {
                type: "mcq",
                question: "عند تصميم بيئة التعلم الشخصية، من المعايير الهامة التي يجب مراعاتها:",
                options: [
                    "أ. عدم تحديد طبيعة الجمهور المستهدف",
                    "ب. جعل الصفحات طويلة جداً",
                    "ج. تحديد طبيعة الجمهور الذي سوف يتم توجيه الموقع إليه",
                    "د. عدم وجود ترابط بين محتويات وأدوات الموقع"
                ],
                correctAnswer: "ج. تحديد طبيعة الجمهور الذي سوف يتم توجيه الموقع إليه"
            }
        ];

        const questionsContainer = document.getElementById('questionsContainer');
        const resultsContainer = document.getElementById('resultsContainer');
        const examForm = document.getElementById('examForm');
        const progressBar = document.getElementById('progressBar');
        const questionNav = document.getElementById('questionNav');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const timer = document.getElementById('timer');
        const nameForm = document.getElementById('nameForm');
        const examContent = document.getElementById('examContent');
        const studentNameInput = document.getElementById('studentName');
        const startExamBtn = document.getElementById('startExamBtn');
        const viewScoresBtn = document.getElementById('viewScoresBtn');
        let currentQuestion = 0;
        let timeLeft = 60 * 60; // 60 minutes in seconds
        let studentName = '';

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft > 0) {
                timeLeft--;
                setTimeout(updateTimer, 1000);
                // Save state every second
                saveExamState();
            } else {
                examForm.submit();
            }
        }

        function createQuestionElement(questionObj, index) {
            const div = document.createElement('div');
            div.className = 'question';
            if (index === 0) div.classList.add('active');

            const questionNumber = document.createElement('div');
            questionNumber.className = 'question-number';
            questionNumber.textContent = `سؤال ${index + 1}`;
            div.appendChild(questionNumber);

            const qTitle = document.createElement('h3');
            qTitle.textContent = questionObj.question;
            div.appendChild(qTitle);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options';

            questionObj.options.forEach((option, i) => {
                const label = document.createElement('label');
                label.className = 'option-label';
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = 'question' + index;
                input.value = option;
                input.required = true;
                
                input.addEventListener('change', function() {
                    document.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                        radio.parentElement.classList.remove('selected');
                    });
                    if (this.checked) {
                        this.parentElement.classList.add('selected');
                        updateQuestionNav();
                    }
                });

                label.appendChild(input);
                label.appendChild(document.createTextNode(' ' + option));
                optionsDiv.appendChild(label);
            });

            div.appendChild(optionsDiv);
            return div;
        }

        function createQuestionNav() {
            questions.forEach((_, index) => {
                const navItem = document.createElement('div');
                navItem.className = 'nav-item';
                navItem.textContent = index + 1;
                navItem.addEventListener('click', () => {
                    showQuestion(index);
                });
                questionNav.appendChild(navItem);
            });
            updateQuestionNav();
        }

        function showQuestion(index) {
            document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('current'));
            
            document.querySelectorAll('.question')[index].classList.add('active');
            document.querySelectorAll('.nav-item')[index].classList.add('current');
            
            currentQuestion = index;
            updateNavigationButtons();
            // Save state when changing questions
            saveExamState();
        }

        function updateNavigationButtons() {
            prevButton.disabled = currentQuestion === 0;
            nextButton.disabled = currentQuestion === questions.length - 1;
            
            prevButton.style.opacity = prevButton.disabled ? '0.5' : '1';
            nextButton.style.opacity = nextButton.disabled ? '0.5' : '1';
        }

        function updateQuestionNav() {
            document.querySelectorAll('.nav-item').forEach((item, index) => {
                const isAnswered = document.querySelector(`input[name="question${index}"]:checked`);
                item.classList.toggle('answered', isAnswered);
            });
        }

        function updateProgress() {
            const totalQuestions = questions.length;
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            progressBar.style.width = progress + '%';
            document.getElementById('progressText').textContent = `${answeredQuestions}/${totalQuestions}`;
        }

        function showResults(event) {
            event.preventDefault();
            
            let correctCount = 0;
            let incorrectCount = 0;
            resultsContainer.innerHTML = '';

            questions.forEach((q, i) => {
                const selected = examForm['question' + i].value;
                const isCorrect = selected === q.correctAnswer;

                const resultDiv = document.createElement('div');
                resultDiv.className = 'result ' + (isCorrect ? 'correct' : 'incorrect');
                resultDiv.innerHTML = `
                    <div class="question-number">سؤال ${i + 1}</div>
                    <h3>${q.question}</h3>
                    <p>إجابتك: ${selected}</p>
                    <p>الإجابة الصحيحة: ${q.correctAnswer}</p>
                `;
                resultsContainer.appendChild(resultDiv);

                if (isCorrect) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });

            const summary = document.createElement('div');
            summary.className = 'summary';
            const percentage = Math.round((correctCount / questions.length) * 100);
            
            summary.innerHTML = `
                <h2>ملخص النتائج</h2>
                <div class="score-circle">${percentage}%</div>
                <p>الطالب: ${studentName}</p>
                <p>لقد أجبت بشكل صحيح على ${correctCount} سؤالاً</p>
                <p>وأجبت بشكل خاطئ على ${incorrectCount} سؤالاً</p>
                <p>النسبة المئوية: ${percentage}%</p>
            `;
            resultsContainer.appendChild(summary);

            // Save the score
            saveScore(studentName, correctCount, questions.length);

            // Send results to admin panel
            sendResultsToAdmin(studentName, correctCount, questions.length, percentage);

            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function sendResultsToAdmin(name, score, totalQuestions, percentage) {
            const now = new Date();
            const timestamp = now.toLocaleString('en-US', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            });

            const resultData = {
                timestamp,
                name,
                score,
                totalQuestions,
                percentage
            };

            // Get existing scores from admin panel
            let adminScores = JSON.parse(localStorage.getItem('examScores') || '[]');
            
            // Add new score
            adminScores.push(resultData);
            
            // Save back to localStorage
            localStorage.setItem('examScores', JSON.stringify(adminScores));

            // Show success message
            alert('تم إرسال النتائج بنجاح إلى لوحة التحكم');
        }

        function saveExamState() {
            const examState = {
                answers: {},
                timeLeft: timeLeft,
                currentQuestion: currentQuestion
            };

            // Save all answered questions
            questions.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    examState.answers[index] = selected.value;
                }
            });

            localStorage.setItem('examState', JSON.stringify(examState));
        }

        function loadExamState() {
            const savedState = localStorage.getItem('examState');
            if (savedState) {
                const examState = JSON.parse(savedState);
                
                // Restore answers
                Object.entries(examState.answers).forEach(([index, value]) => {
                    const input = document.querySelector(`input[name="question${index}"][value="${value}"]`);
                    if (input) {
                        input.checked = true;
                        input.parentElement.classList.add('selected');
                    }
                });

                // Restore time
                timeLeft = examState.timeLeft;
                updateTimer();

                // Restore current question
                showQuestion(examState.currentQuestion);

                // Update progress and navigation
                updateProgress();
                updateQuestionNav();
            }
        }

        function saveScore(name, score, totalQuestions) {
            const now = new Date();
            const timestamp = now.toLocaleString('en-US', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            });
            
            const scoreData = {
                timestamp,
                name,
                score,
                totalQuestions,
                percentage: Math.round((score / totalQuestions) * 100)
            };

            // Get existing scores
            let scores = JSON.parse(localStorage.getItem('examScores') || '[]');
            
            // Add new score
            scores.push(scoreData);
            
            // Save back to localStorage
            localStorage.setItem('examScores', JSON.stringify(scores));
        }

        function showAllScores() {
            const scores = JSON.parse(localStorage.getItem('examScores') || '[]');
            
            const scoresList = document.createElement('div');
            scoresList.className = 'scores-list';
            
            if (scores.length === 0) {
                scoresList.innerHTML = '<p>لا توجد نتائج سابقة</p>';
            } else {
                scoresList.innerHTML = `
                    <h3>النتائج السابقة</h3>
                    ${scores.map(score => `
                        <div class="score-item">
                            <p>الطالب: ${score.name}</p>
                            <p>التاريخ: ${score.timestamp}</p>
                            <p>الدرجة: ${score.score}/${score.totalQuestions}</p>
                            <p>النسبة المئوية: ${score.percentage}%</p>
                        </div>
                    `).join('')}
                `;
            }

            // Remove existing scores list if any
            const existingList = document.querySelector('.scores-list');
            if (existingList) {
                existingList.remove();
            }

            // Add new scores list
            resultsContainer.appendChild(scoresList);
            scoresList.scrollIntoView({ behavior: 'smooth' });
        }

        function saveStudentName(name) {
            localStorage.setItem('studentName', name);
        }

        function getStudentName() {
            return localStorage.getItem('studentName');
        }

        function validateName(name) {
            return name.trim().length >= 3;
        }

        function showError(message) {
            const errorElement = document.getElementById('nameError');
            const inputElement = document.getElementById('studentName');
            errorElement.textContent = message;
            errorElement.classList.add('show');
            inputElement.classList.add('error');
        }

        function hideError() {
            const errorElement = document.getElementById('nameError');
            const inputElement = document.getElementById('studentName');
            errorElement.classList.remove('show');
            inputElement.classList.remove('error');
        }

        function startExam() {
            const name = studentNameInput.value.trim();
            if (validateName(name)) {
                hideError();
                studentName = name;
                saveStudentName(name);
                nameForm.style.display = 'none';
                examContent.classList.add('active');
                updateTimer();
            } else {
                showError('الرجاء إدخال اسم صحيح (3 أحرف على الأقل)');
            }
        }

        function init() {
            // Check if student name exists
            const savedName = getStudentName();
            if (savedName) {
                studentName = savedName;
                nameForm.style.display = 'none';
                examContent.classList.add('active');
                updateTimer();
            }

            questions.forEach((q, i) => {
                const qElem = createQuestionElement(q, i);
                questionsContainer.appendChild(qElem);
            });

            createQuestionNav();
            updateNavigationButtons();

            prevButton.addEventListener('click', () => {
                if (currentQuestion > 0) {
                    showQuestion(currentQuestion - 1);
                }
            });

            nextButton.addEventListener('click', () => {
                if (currentQuestion < questions.length - 1) {
                    showQuestion(currentQuestion + 1);
                }
            });

            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    updateProgress();
                    updateQuestionNav();
                    saveExamState();
                });
            });

            examForm.addEventListener('submit', showResults);
            
            // Load saved state if exists
            loadExamState();
            
            // Start timer if not already running
            if (!localStorage.getItem('examState')) {
                updateTimer();
            }

            // Add beforeunload event listener
            window.addEventListener('beforeunload', (e) => {
                saveExamState();
            });

            // Add event listener for starting the exam
            startExamBtn.addEventListener('click', startExam);
            studentNameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    startExam();
                }
            });

            // Add event listener for viewing scores
            viewScoresBtn.addEventListener('click', showAllScores);
        }

        init();
    </script>
</body>
</html>
