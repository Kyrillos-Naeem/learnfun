<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore academic departments and subjects with the Smart Learning Portal. Your integrated platform for unique learning experiences.">
    <meta name="keywords" content="learnfun, smart learning, education portal, online learning, academic departments, computer science, artificial intelligence, mechanical engineering, business administration, digital marketing, exam simulation, interactive learning, educational platform, student resources, course materials, learning experience, knowledge platform, study materials, academic subjects, educational technology">
    <title>LearnFun - Smart Learning Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7696225868255842" crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-7696225868255842">
    <script type="application/ld+json">
        [
          {
            "@context": "https://schema.org",
            "@type": "Organization",
            "@id": "https://learnfun.me/#organization",
            "name": "learnfun",
            "url": "https://learnfun.me",
            "logo": {
              "@type": "ImageObject",
              "url": "https://learnfun.me/img/logo.png",
              "width": 600,
              "height": 60
            },
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://learnfun.me/search?q={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          },
          {
            "@context": "https://schema.org",
            "@type": "Person",
            "name": "Bebo Naiem",
            // "url" property removed. If "Bebo Naiem" has a personal profile page, use its URL here.
            // e.g., "url": "https://learnfun.me/authors/bebo-naiem"
            // "image" property removed. If "Bebo Naiem" has a personal image, use its URL here.
            // e.g., "image": "https://learnfun.me/img/bebo-naiem.jpg"
            "worksFor": {
              "@id": "https://learnfun.me/#organization"
            }
          }
        ]
        </script>
    <style>
        :root {
            /* Enhanced Color Palette */
            --bg-dark-primary: #0A0A1A;
            --bg-dark-secondary: #14142B;
            --bg-dark-tertiary: #1E1E3F;
            --text-light-primary: #FFFFFF;
            --text-light-secondary: #B4B4D4;
            --accent-primary: #6366F1;
            --accent-secondary: #818CF8;
            --accent-tertiary: #A5B4FC;
            --accent-success: #10B981;
            --accent-warning: #F59E0B;
            --accent-error: #EF4444;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-color-light: rgba(99, 102, 241, 0.25);
            --shadow-color-dark: rgba(0, 0, 0, 0.4);
            
            /* Typography */
            --font-ar: 'Cairo', sans-serif;
            --font-en: 'Roboto', sans-serif;
            
            /* Spacing & Sizing */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            
            /* Border Radius */
            --border-radius-sm: 0.5rem;
            --border-radius-md: 0.75rem;
            --border-radius-lg: 1rem;
            --border-radius-xl: 1.5rem;
            --border-radius-full: 9999px;
            
            /* Transitions */
            --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-medium: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Z-index Layers */
            --z-base: 1;
            --z-above: 10; 
            --z-header: 100;
            --z-lang-switcher: 105;
            --z-mobile-nav-overlay: 108;
            --z-mobile-nav: 110;
            --z-modal: 500; 
            --z-overlay: 1000; 

            /* Header Height */
            --header-height: 70px;
        }

        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            background: linear-gradient(135deg, var(--bg-dark-primary) 0%, var(--bg-dark-secondary) 100%);
            color: var(--text-light-primary);
            font-family: var(--font-ar);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app-shell {
            padding-top: var(--header-height);
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: var(--border-radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }

        .app-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 10, 26, 0.85); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: var(--z-header); 
            border-bottom: 1px solid var(--border-color);
            transition: background-color var(--transition-medium);
        }

        .app-header:hover {
            background: rgba(10, 10, 26, 0.95);
        }

        .header-content-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1300px; 
            margin: 0 auto;
            padding: 0 var(--spacing-md);
            height: var(--header-height);
        }

        .header-logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--text-light-primary);
        }

        .header-logo {
            height: 40px; 
            width: auto;
            margin-inline-end: var(--spacing-sm);
            transition: transform var(--transition-fast);
        }

        .header-logo-link:hover .header-logo {
            transform: scale(1.1);
        }

        .header-site-name {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: var(--font-en);
            letter-spacing: 0.5px;
            color: var(--text-light-primary);
        }

        .main-navigation {
            display: flex;
            align-items: center;
        }

        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: var(--spacing-sm); 
        }

        .nav-link {
            color: var(--text-light-secondary);
            text-decoration: none;
            padding: var(--spacing-xs) var(--spacing-sm);
            font-weight: 500;
            border-radius: var(--border-radius-sm);
            transition: color var(--transition-fast), background-color var(--transition-fast);
            position: relative;
            white-space: nowrap;
        }

        .nav-link:hover,
        .nav-link:focus {
            color: var(--text-light-primary);
            background-color: rgba(99, 102, 241, 0.2); 
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0px; 
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background-color: var(--accent-primary);
            transition: width var(--transition-medium);
        }

        .nav-link:hover::after,
        .nav-link:focus::after {
            width: 70%; 
        }

        .nav-toggle-button {
            display: none; 
            background: transparent;
            border: none;
            color: var(--text-light-primary);
            font-size: 1.8rem; 
            cursor: pointer;
            padding: var(--spacing-xs);
            z-index: var(--z-mobile-nav);
        }
        .nav-toggle-button .fa-times {
            display: none;
        }

        .language-switcher-container {
            position: fixed;
            top: var(--spacing-md);
            right: var(--spacing-md);
            z-index: var(--z-lang-switcher);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: rgba(20, 20, 43, 0.9);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--border-radius-full);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-color);
            transition: all var(--transition-medium);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .language-switcher-container:hover,
        .language-switcher-container:focus-within {
            background: rgba(30, 30, 63, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow-color-dark);
            border-color: var(--accent-primary);
        }

        .language-label {
            color: var(--accent-primary);
            font-size: 1.2rem;
            font-weight: 500;
            transition: color var(--transition-fast);
        }

        .language-switcher-container:hover .language-label {
            color: var(--accent-tertiary);
        }

        #languageSelect {
            background: transparent;
            color: var(--text-light-primary);
            border: none;
            padding: var(--spacing-xs) var(--spacing-sm);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%236366F1"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 0.5rem center; 
            background-size: 1.2rem;
            padding-right: 2rem; 
            transition: all var(--transition-fast);
        }
        html[dir="rtl"] #languageSelect {
            background-position: left 0.5rem center;
            padding-left: 2rem;
            padding-right: var(--spacing-sm);
        }

        #languageSelect:hover,
        #languageSelect:focus {
            color: var(--accent-tertiary);
        }

        #languageSelect option {
            background: var(--bg-dark-tertiary);
            color: var(--text-light-primary);
            padding: var(--spacing-sm);
        }

        .welcome-section {
            position: relative;
            min-height: calc(100vh - var(--header-height));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-xl) var(--spacing-md);
            text-align: center;
            overflow: hidden;
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(129, 140, 248, 0.15) 0%, transparent 50%);
            z-index: -1;
            animation: gradientShift 15s ease-in-out infinite alternate;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 0%;
            }
            100% {
                background-position: 100% 100%;
            }
        }

        .welcome-section h1 {
            font-size: 4.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            background: linear-gradient(135deg, var(--text-light-primary), var(--accent-tertiary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: fadeInUp 1s ease-out;
            text-shadow: 0 2px 10px rgba(255, 255, 255, 0.1);
        }

        .welcome-section .subtitle {
            font-size: 1.25rem;
            color: var(--text-light-secondary);
            max-width: 600px;
            margin-bottom: var(--spacing-xl);
            animation: fadeInUp 1s ease-out 0.2s backwards;
            line-height: 1.8;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: var(--text-light-primary);
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--border-radius-full);
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all var(--transition-medium);
            animation: fadeInUp 1s ease-out 0.4s backwards;
            box-shadow: 0 4px 20px var(--shadow-color-light);
            position: relative;
            overflow: hidden;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
            opacity: 0;
            transition: opacity var(--transition-medium);
        }

        .cta-button:hover::before,
        .cta-button:focus::before {
            opacity: 1;
        }

        .cta-button span {
            position: relative;
            z-index: 1;
        }

        .cta-button:hover,
        .cta-button:focus {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 30px var(--shadow-color-light);
            outline: 2px solid var(--accent-tertiary);
            outline-offset: 4px;
        }

        .main-content-area {
            position: relative;
            width: 90%;
            max-width: 1200px;
            margin: -100px auto var(--spacing-xl);
            padding: var(--spacing-xl);
            background: rgba(20, 20, 43, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: var(--border-radius-xl);
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 60px var(--shadow-color-dark);
        }

        .content-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .content-header h2 {
            font-size: 2.5rem;
            color: var(--text-light-primary);
            margin-bottom: var(--spacing-sm);
            background: linear-gradient(135deg, var(--text-light-primary), var(--accent-tertiary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .content-header p {
            color: var(--text-light-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-bar-container {
            position: relative;
            margin-bottom: var(--spacing-xl);
        }

        #mainSearchInput {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-xl);
            background: var(--bg-dark-tertiary);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-full);
            color: var(--text-light-primary);
            font-size: 1rem;
            transition: all var(--transition-medium);
        }

        #mainSearchInput:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 4px var(--shadow-color-light);
            background: rgba(30, 30, 63, 0.9);
        }

        .search-icon-main {
            position: absolute;
            top: 50%;
            right: var(--spacing-md); 
            transform: translateY(-50%);
            color: var(--text-light-secondary);
            pointer-events: none;
            font-size: 1.2rem;
        }
        html[dir="rtl"] .search-icon-main {
            right: auto;
            left: var(--spacing-md);
        }

        .clear-search-btn {
            position: absolute;
            top: 50%;
            left: var(--spacing-md); 
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-light-secondary);
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: 50%;
            display: none;
            transition: all var(--transition-fast);
        }
        html[dir="rtl"] .clear-search-btn {
            left: auto;
            right: var(--spacing-md);
        }

        .clear-search-btn.visible {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .clear-search-btn:hover {
            color: var(--accent-error);
            background: rgba(239, 68, 68, 0.1);
        }

        .department-card {
            background: var(--bg-dark-tertiary);
            border-radius: var(--border-radius-lg);
            margin-bottom: var(--spacing-md);
            overflow: hidden;
            transition: all var(--transition-medium);
            border: 1px solid var(--border-color);
            position: relative;
        }

        .department-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            opacity: 0;
            transition: opacity var(--transition-medium);
        }

        .department-card:hover::before,
        .department-card:focus-within::before {
            opacity: 1;
        }

        .department-card:hover,
        .department-card:focus-within {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px var(--shadow-color-dark);
            border-color: var(--accent-primary);
        }

        .department-header {
            padding: var(--spacing-md) var(--spacing-lg);
            background: linear-gradient(to right, var(--bg-dark-secondary), var(--bg-dark-tertiary));
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-medium);
        }

        .department-header:hover,
        .department-header:focus {
            background: linear-gradient(to right, var(--accent-primary), var(--accent-secondary));
        }

        .department-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .toggle-icon {
            transition: transform var(--transition-medium);
            color: var(--accent-primary);
        }

        .department-header.active .toggle-icon {
            transform: rotate(180deg);
            color: var(--text-light-primary);
        }

        .subject-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-smooth);
            background: var(--bg-dark-tertiary);
        }

        .department-header.active + .subject-list {
            max-height: 1000px; 
        }

        .subject-item {
            padding: var(--spacing-md) var(--spacing-lg);
            border-top: 1px solid var(--border-color);
            transition: all var(--transition-fast);
            position: relative;
        }

        .subject-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0; 
            width: 3px;
            height: 100%;
            background: var(--accent-primary);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }
        html[dir="rtl"] .subject-item::before {
            left: auto;
            right: 0;
        }

        .subject-item:hover::before,
        .subject-item:focus-within::before {
            opacity: 1;
        }

        .subject-item:hover,
        .subject-item:focus-within {
            background: rgba(99, 102, 241, 0.1);
            padding-left: calc(var(--spacing-lg) + 4px); 
        }
        html[dir="rtl"] .subject-item:hover,
        html[dir="rtl"] .subject-item:focus-within {
            padding-left: var(--spacing-lg);
            padding-right: calc(var(--spacing-lg) + 4px);
        }

        .subject-item a {
            color: var(--text-light-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 1rem;
            font-weight: 500;
            transition: all var(--transition-fast);
        }

        .subject-item a:hover,
        .subject-item a:focus {
            color: var(--accent-tertiary);
        }

        .app-footer {
            text-align: center;
            padding: var(--spacing-xl) var(--spacing-md);
            background: var(--bg-dark-primary);
            border-top: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .app-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
        }

        .footer-links {
            margin-bottom: var(--spacing-md);
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-light-secondary);
            text-decoration: none;
            transition: all var(--transition-fast);
            position: relative;
            padding: var(--spacing-xs) var(--spacing-sm);
        }

        .footer-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent-primary);
            transition: all var(--transition-fast);
            transform: translateX(-50%);
        }

        .footer-links a:hover::after,
        .footer-links a:focus::after {
            width: 100%;
        }

        .footer-links a:hover,
        .footer-links a:focus {
            color: var(--accent-primary);
        }

        .copyright {
            color: var(--text-light-secondary);
            font-size: 0.9rem;
        }

        .placeholder-page-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 26, 0.9);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-overlay);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-medium);
        }

        .placeholder-page-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .placeholder-page-content {
            background: var(--bg-dark-secondary);
            padding: var(--spacing-xl);
            border-radius: var(--border-radius-xl);
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 60px var(--shadow-color-dark);
            opacity: 0;
            transform: scale(0.95) translateY(20px);
            transition: all var(--transition-medium);
        }

        .placeholder-page-overlay.visible .placeholder-page-content {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .placeholder-page-content h2 {
            color: var(--text-light-primary);
            font-size: 2rem;
            margin-bottom: var(--spacing-lg);
            background: linear-gradient(135deg, var(--text-light-primary), var(--accent-tertiary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .placeholder-page-content p,
        .placeholder-page-content ul {
            margin-bottom: var(--spacing-md);
            line-height: 1.8;
        }

        .placeholder-page-content ul {
            padding-right: var(--spacing-lg); 
        }
        html[dir="ltr"] .placeholder-page-content ul {
            padding-right: 0;
            padding-left: var(--spacing-lg);
        }

        .placeholder-page-content a {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
            transition: all var(--transition-fast);
            position: relative;
        }

        .placeholder-page-content a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--accent-primary);
            transform: scaleX(0);
            transform-origin: right; 
            transition: transform var(--transition-fast);
        }
        html[dir="rtl"] .placeholder-page-content a::after {
            transform-origin: left;
        }

        .placeholder-page-content a:hover::after {
            transform: scaleX(1);
            transform-origin: left; 
        }
        html[dir="rtl"] .placeholder-page-content a:hover::after {
            transform-origin: right;
        }

        .placeholder-page-content a:hover {
            color: var(--accent-tertiary);
        }

        .close-btn {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md); 
            background: none;
            border: none;
            color: var(--text-light-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: 50%;
            transition: all var(--transition-fast);
        }
        html[dir="rtl"] .close-btn {
            right: auto;
            left: var(--spacing-md);
        }

        .close-btn:hover {
            color: var(--accent-error);
            background: rgba(239, 68, 68, 0.1);
            transform: rotate(90deg);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) { 
            :root {
                --spacing-xl: 2rem;
                --spacing-lg: 1.5rem;
                --spacing-md: 1rem;
                --spacing-sm: 0.75rem;
                --spacing-xs: 0.5rem;
            }
             .header-site-name {
                font-size: 1.3rem;
            }

            .nav-list {
                flex-direction: column;
                position: fixed; 
                top: var(--header-height); 
                left: -100%; 
                width: min(75vw, 280px); 
                height: calc(100vh - var(--header-height)); 
                background: var(--bg-dark-secondary); 
                padding: var(--spacing-lg) var(--spacing-md);
                border-right: 1px solid var(--border-color); 
                box-shadow: 5px 0 15px rgba(0,0,0,0.2); 
                transition: left var(--transition-medium) ease-in-out, right var(--transition-medium) ease-in-out;
                overflow-y: auto; 
                z-index: var(--z-mobile-nav);
            }
            html[dir="ltr"] .nav-list { 
                right: -100%;
                left: auto;
                border-left: 1px solid var(--border-color);
                border-right: none;
                box-shadow: -5px 0 15px rgba(0,0,0,0.2);
            }

            .nav-list.active {
                left: 0; 
            }
            html[dir="ltr"] .nav-list.active {
                right: 0;
                left: auto;
            }

            .nav-link {
                display: block; 
                padding: var(--spacing-md) var(--spacing-sm);
                font-size: 1.1rem;
            }
            .nav-link:hover, .nav-link:focus {
                background-color: rgba(99, 102, 241, 0.3);
            }
            .nav-link::after {
                display: none; 
            }

            .nav-toggle-button {
                display: block;
            }

            .nav-mobile-overlay {
                position: fixed;
                top: var(--header-height);
                left: 0;
                width: 100%;
                height: calc(100vh - var(--header-height));
                background: rgba(0,0,0,0.5);
                z-index: var(--z-mobile-nav-overlay); 
                opacity: 0;
                visibility: hidden;
                transition: opacity var(--transition-medium), visibility var(--transition-medium);
            }
            .nav-mobile-overlay.active {
                opacity: 1;
                visibility: visible;
            }

            .welcome-section h1 {
                font-size: 3rem;
            }

            .welcome-section .subtitle {
                font-size: 1.1rem;
            }

            .main-content-area {
                width: 95%;
                padding: var(--spacing-lg);
                margin-top: -60px;
            }

            .content-header h2 {
                font-size: 2rem;
            }

            .department-header h3 {
                font-size: 1.1rem;
            }

            .subject-item {
                padding: var(--spacing-sm) var(--spacing-md);
            }

            .footer-links {
                gap: var(--spacing-sm);
            }
        }

        @media (max-width: 480px) {
            .welcome-section h1 {
                font-size: 2.5rem;
            }

            .welcome-section .subtitle {
                font-size: 1rem;
            }

            .cta-button {
                padding: var(--spacing-sm) var(--spacing-lg);
                font-size: 1rem;
            }

            .main-content-area {
                padding: var(--spacing-md);
            }

            .content-header h2 {
                font-size: 1.8rem;
            }

            #mainSearchInput {
                padding: var(--spacing-sm) var(--spacing-lg);
            }
        }

        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .made-by {
            margin-top: var(--spacing-sm);
            color: var(--text-light-secondary);
            font-size: 0.9rem;
        }

        .made-by a {
            color: var(--accent-primary);
            text-decoration: none;
            transition: all var(--transition-fast);
            position: relative;
        }

        .made-by a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--accent-primary);
            transform: scaleX(0);
            transform-origin: right; 
            transition: transform var(--transition-fast);
        }
        html[dir="rtl"] .made-by a::after {
            transform-origin: left;
        }

        .made-by a:hover::after {
            transform: scaleX(1);
            transform-origin: left; 
        }
        html[dir="rtl"] .made-by a:hover::after {
            transform-origin: right;
        }

        .made-by a:hover {
            color: var(--accent-tertiary);
        }
    </style>
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "rsadzs3d63");
</script>
</head>
<body>
    <div class="app-shell">
        <header class="app-header">
            <div class="header-content-wrapper">
                <a href="#welcome" class="header-logo-link" aria-label="LearnFun Home">
                    <img src="img/logo.png" alt="learnfun.me logo" class="header-logo">
                    <span class="header-site-name">LearnFun</span>
                </a>
                <nav class="main-navigation" aria-label="Main menu">
                    <button class="nav-toggle-button" aria-expanded="false" aria-controls="mainNavList">
                        <span class="visually-hidden" data-translate-key-text="toggleNavigation"></span>
                        <i class="fas fa-bars"></i>
                        <i class="fas fa-times"></i>
                    </button>
                    <ul class="nav-list" id="mainNavList">
                        <li><a href="#welcome" class="nav-link" data-translate-key-text="navHome"></a></li>
                        <li><a href="#mainContent" class="nav-link" data-translate-key-text="navDepartments"></a></li>
                        <li><a href="#" onclick="showStaticPage('aboutUs'); return false;" class="nav-link" data-translate-key-text="linkAboutUs"></a></li>
                        <li><a href="#" onclick="showStaticPage('contactUs'); return false;" class="nav-link" data-translate-key-text="linkContactUs"></a></li>
                    </ul>
                </nav>
            </div>
        </header>
        
        <section class="welcome-section" id="welcome">
            <div class="language-switcher-container">
                <label for="languageSelect" class="language-label" id="languageLabel">ğŸŒ</label>
                <select id="languageSelect" aria-labelledby="languageLabel" title="Select language"></select>
            </div>
            <h1 data-translate-key="welcomeTitle"></h1>
            <p class="subtitle" data-translate-key="welcomeSubtitle"></p>
            <a href="#mainContent" class="cta-button" id="startExploringBtn" role="button">
                <span data-translate-key-text="exploreButton"></span>
            </a>
        </section>

        <section class="main-content-area" id="mainContent" aria-labelledby="mainContentHeader">
            <header class="content-header" id="mainContentHeader">
                <h2 data-translate-key="sectionsTitle"></h2>
                <p data-translate-key="sectionsSubtitle"></p>
            </header>
            <div class="search-bar-container">
                <input type="text" id="mainSearchInput" data-translate-key-placeholder="searchInputPlaceholder" aria-label="Search" title="Search" placeholder="...">
                <span class="search-icon-main" id="searchIconContainer" aria-hidden="true">
                    <i class="fas fa-search"></i>
                </span>
                <button class="clear-search-btn" id="clearSearchBtn" aria-label="Clear search input" title="Clear search input" tabindex="0" style="display:none;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="departmentsListContainer">
                <!-- Departments will be rendered here -->
            </div>
        </section>

        <footer class="app-footer" role="contentinfo">
            <div class="footer-links">
                <a href="#" onclick="showStaticPage('privacyPolicy'); return false;" data-translate-key-text="linkPrivacyPolicy" role="button" tabindex="0"></a>
                <a href="#" onclick="showStaticPage('aboutUs'); return false;" data-translate-key-text="linkAboutUs" role="button" tabindex="0"></a>
                <a href="#" onclick="showStaticPage('contactUs'); return false;" data-translate-key-text="linkContactUs" role="button" tabindex="0"></a>
                <a href="#" onclick="showStaticPage('termsConditions'); return false;" data-translate-key-text="linkTermsConditions" role="button" tabindex="0"></a>
            </div>
            <p class="copyright" data-translate-key="copyright"></p>
            <p class="made-by">Made with â¤ï¸ by <a href="https://github.com/BeboNaiem" target="_blank" rel="noopener noreferrer">Bebo Naiem</a></p>
        </footer>
    </div>

    <div class="placeholder-page-overlay" id="placeholderOverlay" role="dialog" aria-modal="true" aria-labelledby="placeholderTitle">
        <div class="placeholder-page-content" id="placeholderContent">
            <h2 id="placeholderTitle" class="visually-hidden"></h2>
            <!-- Content will be injected here -->
            <button class="close-btn" onclick="hideInfoPage()" aria-label="Close dialog" title="Close dialog" tabindex="0">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        // --- SVG Icons ---
        const SVG_ICONS = {
            search: `<svg viewBox="0 0 24 24" fill="currentColor" width="1em" height="1em" aria-hidden="true" focusable="false"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>`,
            clear: `<svg viewBox="0 0 24 24" fill="currentColor" width="1em" height="1em" aria-hidden="true" focusable="false"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>`,
            chevronDown: `<svg viewBox="0 0 24 24" fill="currentColor" width="1em" height="1em" aria-hidden="true" focusable="false"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>`
        };

        // --- Supported Languages Configuration ---
        const supportedLanguages = {
            ar: { name: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", dir: "rtl", font: "var(--font-ar)" },
            en: { name: "English", dir: "ltr", font: "var(--font-en)" }
        };

        // --- Translations Store ---
        const translations = {
            ar: {
                pageTitle: "Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø±Ø­",
                welcomeTitle: "Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ",
                welcomeSubtitle: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØªÙƒ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© ÙˆØ®ÙˆØ¶ ØªØ¬Ø§Ø±Ø¨ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙØ±ÙŠØ¯Ø©. Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ© Ø§Ù„Ø¢Ù†!",
                exploreButton: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø¢Ù†",
                sectionsTitle: "Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©",
                sectionsSubtitle: "ØªØµÙØ­ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ ØªÙ‡ØªÙ… Ø¨Ù‡Ø§.",
                searchInputPlaceholder: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø§Ø¯Ø© Ø£Ùˆ Ù‚Ø³Ù…...",
                copyright: "Â© 2025 Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.",
                noResults: "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ù‚Ø³Ø§Ù… Ø£Ùˆ Ù…ÙˆØ§Ø¯ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ.",
                noSubjects: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.",
                examModalTitlePrefix: "Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù…ØªØ­Ø§Ù†: ",
                examModalIntro: "Ø£Ù†Øª Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø¨Ø¯Ø¡ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù…ØªØ­Ø§Ù† Ù„Ù…Ø§Ø¯Ø©: ",
                examModalInstructionsTitle: "ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù‡Ø§Ù…Ø©:",
                examModalInstruction1: "ØªØ£ÙƒØ¯ Ù…Ù† ÙÙ‡Ù…Ùƒ Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¬ÙŠØ¯Ø§Ù‹.",
                examModalInstruction2: "Ø®ØµØµ ÙˆÙ‚ØªØ§Ù‹ ÙƒØ§ÙÙŠØ§Ù‹ Ø¯ÙˆÙ† Ù…Ù‚Ø§Ø·Ø¹Ø§Øª.",
                examModalInstruction3: "Ø±Ø§Ø¬Ø¹ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡ (ÙÙŠ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙØ¹Ù„ÙŠ).",
                examModalStartButton: "Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©",
                closeButton: "Ø¥ØºÙ„Ø§Ù‚",
                privacyPolicyTitle: "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©",
                privacyPolicyContent: `
                    <p>Ù†Ø­Ù† Ù†Ù‡ØªÙ… Ø¨Ø®ØµÙˆØµÙŠØªÙƒ. ØªÙˆØ¶Ø­ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ù‡Ø°Ù‡ ÙƒÙŠÙ Ù†Ø¬Ù…Ø¹ ÙˆÙ†Ø³ØªØ®Ø¯Ù… ÙˆÙ†Ø­Ù…ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù…Ù†ØµØªÙ†Ø§.</p>
                    <p><strong>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø¬Ù…Ø¹Ù‡Ø§:</strong></p>
                    <ul>
                        <li>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø¥Ø°Ø§ ØªÙˆÙØ±Øª): Ù…Ø«Ù„ Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.</li>
                        <li>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: Ù…Ø«Ù„ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„ØªÙŠ ØªØ²ÙˆØ±Ù‡Ø§ØŒ ØªÙØ§Ø¹Ù„Ø§ØªÙƒ Ù…Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰.</li>
                        <li>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªÙ‚Ù†ÙŠØ©: Ù…Ø«Ù„ Ø¹Ù†ÙˆØ§Ù† IPØŒ Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØµÙØ­ØŒ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„.</li>
                    </ul>
                    <p><strong>ÙƒÙŠÙ Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ:</strong></p>
                    <ul>
                        <li>Ù„ØªÙˆÙÙŠØ± ÙˆØªØ­Ø³ÙŠÙ† Ø®Ø¯Ù…Ø§ØªÙ†Ø§.</li>
                        <li>Ù„ØªØ®ØµÙŠØµ ØªØ¬Ø±Ø¨ØªÙƒ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©.</li>
                        <li>Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø´Ø£Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø£Ùˆ Ø§Ù„Ø¯Ø¹Ù….</li>
                    </ul>
                    <p><strong>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:</strong></p>
                    <p>Ù†Ø­Ù† Ù„Ø§ Ù†Ø¨ÙŠØ¹ Ø£Ùˆ Ù†Ø¤Ø¬Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ø£Ø·Ø±Ø§Ù Ø«Ø§Ù„Ø«Ø©. Ù‚Ø¯ Ù†Ø´Ø§Ø±Ùƒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¬Ù…Ø¹Ø© Ø£Ùˆ Ù…Ø¬Ù‡ÙˆÙ„Ø© Ø§Ù„Ù…ØµØ¯Ø± Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØ­Ù„ÙŠÙ„.</p>
                    <p><strong>Ø£Ù…Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong></p>
                    <p>Ù†ØªØ®Ø° ØªØ¯Ø§Ø¨ÙŠØ± Ù…Ø¹Ù‚ÙˆÙ„Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒØŒ ÙˆÙ„ÙƒÙ† Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¶Ù…Ø§Ù† Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø·Ù„Ù‚ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</p>
                    <p><strong>Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø³Ø©:</strong></p>
                    <p>Ù‚Ø¯ Ù†Ù‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ« Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ù‡Ø°Ù‡ Ù…Ù† ÙˆÙ‚Øª Ù„Ø¢Ø®Ø±. Ø³Ù†Ø®Ø·Ø±Ùƒ Ø¨Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª Ø¬ÙˆÙ‡Ø±ÙŠØ©.</p>
                    <p><em>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: [Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…]</em></p>
                `,
                aboutUsTitle: "Ù…Ù† Ù†Ø­Ù†",
                aboutUsContent: `
                    <p>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ Ù‡ÙŠ Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙˆÙÙŠØ± ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„Ù… ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆÙ…Ø±Ù†Ø© Ù„Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ù…Ù‡ØªÙ…ÙŠÙ† Ø¨Ø§Ù„Ù…Ø¹Ø±ÙØ©.</p>
                    <p><strong>Ù…Ù‡Ù…ØªÙ†Ø§:</strong></p>
                    <p>ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† Ù…Ù† Ø®Ù„Ø§Ù„ ØªÙˆÙÙŠØ± Ø£Ø¯ÙˆØ§Øª ÙˆÙ…ÙˆØ§Ø¯ ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©ØŒ ÙˆØªØ´Ø¬ÙŠØ¹ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°Ø§ØªÙŠ Ø§Ù„Ù…Ø³ØªÙ…Ø±.</p>
                    <p><strong>Ø±Ø¤ÙŠØªÙ†Ø§:</strong></p>
                    <p>Ø£Ù† Ù†ÙƒÙˆÙ† Ø§Ù„ÙˆØ¬Ù‡Ø© Ø§Ù„Ø±Ø§Ø¦Ø¯Ø© Ù„Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©ØŒ ÙˆØ§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© ÙÙŠ Ø¨Ù†Ø§Ø¡ Ù…Ø¬ØªÙ…Ø¹ Ù…Ø¹Ø±ÙÙŠ Ù…ØªØ·ÙˆØ±.</p>
                    <p>Ù†Ø­Ù† ÙØ±ÙŠÙ‚ Ù…Ù† Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† ÙˆØ§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ­Ù…Ø³ÙŠÙ† Ù„ØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ù…ÙƒÙ†Ø©.</p>
                `,
                contactUsTitle: "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
                contactUsContent: `
                    <p>Ù†Ø­Ù† Ø³Ø¹Ø¯Ø§Ø¡ Ø¨ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§! Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø£Ùˆ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø£Ùˆ Ø§Ø³ØªÙØ³Ø§Ø±Ø§ØªØŒ ÙÙ„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
                    <ul>
                        <li><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> <a href="mailto:Bebo.naiem13@gmail.com">Bebo.naiem13@gmail.com</a></li>     
                    </ul>
                    <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ù…ØªØ§Ø¨Ø¹ØªÙ†Ø§ Ø¹Ù„Ù‰ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ (Ø±ÙˆØ§Ø¨Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠØ©):</p>
                    <ul>
                        <li><a href="#" target="_blank" rel="noopener noreferrer">ÙÙŠØ³Ø¨ÙˆÙƒ</a></li>
                        <li><a href="#" target="_blank" rel="noopener noreferrer">ØªÙˆÙŠØªØ±</a></li>
                        <li><a href="#" target="_blank" rel="noopener noreferrer">Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†</a></li>
                    </ul>
                `,
                termsConditionsTitle: "Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…",
                termsConditionsContent: `
                    <p>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ. Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
                    <p><strong>1. Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ø¨Ø§Ù„Ø´Ø±ÙˆØ·:</strong></p>
                    <p>ÙŠØ´ÙƒÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù„Ù…Ù†ØµØ© Ù…ÙˆØ§ÙÙ‚Ø© ÙƒØ§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ·. Ø¥Ø°Ø§ ÙƒÙ†Øª Ù„Ø§ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø£ÙŠ Ø¬Ø²Ø¡ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ·ØŒ ÙÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¹Ø¯Ù… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©.</p>
                    <p><strong>2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©:</strong></p>
                    <ul>
                        <li>ÙŠØ¬Ø¨ Ø£Ù† ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†ØµØ© Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆÙ‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙÙ‚Ø·.</li>
                        <li>Ø£Ù†Øª Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ø±ÙŠØ© Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ (Ø¥Ø°Ø§ ØªÙˆÙØ±Øª).</li>
                        <li>Ù„Ø§ ÙŠØ¬ÙˆØ² Ù„Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù‚Ø¯ ØªØ¶Ø± Ø¨Ù‡Ø§ Ø£Ùˆ ØªØ¹Ø·Ù„ Ø®Ø¯Ù…Ø§ØªÙ‡Ø§.</li>
                    </ul>
                    <p><strong>3. Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</strong></p>
                    <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ© Ù…Ø­Ù…ÙŠØ© Ø¨Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø± ÙˆØ§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©. Ù„Ø§ ÙŠØ¬ÙˆØ² Ù„Ùƒ Ù†Ø³Ø® Ø£Ùˆ ØªÙˆØ²ÙŠØ¹ Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠ Ù…Ø­ØªÙˆÙ‰ Ø¯ÙˆÙ† Ø¥Ø°Ù† ØµØ±ÙŠØ­.</p>
                    <p><strong>4. Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©:</strong></p>
                    <p>ÙŠØªÙ… ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ "ÙƒÙ…Ø§ Ù‡Ùˆ" Ø¯ÙˆÙ† Ø£ÙŠ Ø¶Ù…Ø§Ù†Ø§Øª. Ù†Ø­Ù† Ù„Ø§ Ù†Ø¶Ù…Ù† Ø¯Ù‚Ø© Ø£Ùˆ Ø§ÙƒØªÙ…Ø§Ù„ Ø£Ùˆ Ù…Ù„Ø§Ø¡Ù…Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ© Ù„Ø£ÙŠ ØºØ±Ø¶ Ù…Ø¹ÙŠÙ†.</p>
                    <p><strong>5. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©:</strong></p>
                    <p>Ù„Ù† Ù†ÙƒÙˆÙ† Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† Ø¹Ù† Ø£ÙŠ Ø£Ø¶Ø±Ø§Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ ØºÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© ØªÙ†Ø´Ø£ Ø¹Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ø£Ùˆ Ø¹Ø¯Ù… Ù‚Ø¯Ø±ØªÙƒ Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©.</p>
                    <p><strong>6. Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·:</strong></p>
                    <p>Ù†Ø­ØªÙØ¸ Ø¨Ø§Ù„Ø­Ù‚ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª. Ø§Ø³ØªÙ…Ø±Ø§Ø±Ùƒ ÙÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø¹Ø¯ Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„Ø§Øª ÙŠØ¹Ù†ÙŠ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©.</p>
                    <p><em>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: [Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…]</em></p>
                `,
                linkPrivacyPolicy: "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©",
                linkAboutUs: "Ù…Ù† Ù†Ø­Ù†",
                linkContactUs: "Ø§ØªØµÙ„ Ø¨Ù†Ø§",
                linkTermsConditions: "Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…",
                navHome: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
                navDepartments: "Ø§Ù„Ø£Ù‚Ø³Ø§Ù…",
                toggleNavigation: "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"
            },
            en: {
                pageTitle: "learn fun",
                welcomeTitle: "Smart Learning Portal",
                welcomeSubtitle: "Welcome to your integrated platform for exploring course materials and engaging in unique learning experiences. Start your knowledge journey now!",
                exploreButton: "Start Exploring Now",
                sectionsTitle: "Academic Departments",
                sectionsSubtitle: "Browse different departments to find the subjects you are interested in.",
                searchInputPlaceholder: "Search for a subject or department...",
                copyright: "Â© 2025 Smart Learning Portal. All rights reserved.",
                noResults: "Sorry, no departments or subjects found matching your search.",
                noSubjects: "No subjects currently available.",
                examModalTitlePrefix: "Exam Simulation: ",
                examModalIntro: "You are about to start an exam simulation for: ",
                examModalInstructionsTitle: "Important Instructions:",
                examModalInstruction1: "Ensure you understand the exam material well.",
                examModalInstruction2: "Allocate sufficient time without interruptions.",
                examModalInstruction3: "Review your answers before finishing (in a real exam).",
                examModalStartButton: "Start Simulation",
                closeButton: "Close",
                privacyPolicyTitle: "Privacy Policy",
                privacyPolicyContent: `
                    <p>We care about your privacy. This Privacy Policy explains how we collect, use, and protect your personal information when you use our platform.</p>
                    <p><strong>Information We Collect:</strong></p>
                    <ul>
                        <li>Registration Information (if available): such as name, email.</li>
                        <li>Usage Data: such as pages you visit, your interactions with content.</li>
                        <li>Technical Information: such as IP address, browser type, operating system.</li>
                    </ul>
                    <p><strong>How We Use Your Information:</strong></p>
                    <ul>
                        <li>To provide and improve our services.</li>
                        <li>To personalize your learning experience.</li>
                        <li>To communicate with you about updates or support.</li>
                    </ul>
                    <p><strong>Information Sharing:</strong></p>
                    <p>We do not sell or rent your personal information to third parties. We may share aggregated or anonymized information for analytical purposes.</p>
                    <p><strong>Data Security:</strong></p>
                    <p>We take reasonable measures to protect your information, but no internet transmission can be guaranteed to be 100% secure.</p>
                    <p><strong>Changes to This Policy:</strong></p>
                    <p>We may update this Privacy Policy from time to time. We will notify you of any material changes.</p>
                    <p><em>Last updated: [Enter Today's Date]</em></p>
                `,
                aboutUsTitle: "About Us",
                aboutUsContent: `
                    <p>The Smart Learning Portal is an educational platform aimed at providing an interactive and flexible learning experience for students and knowledge seekers.</p>
                    <p><strong>Our Mission:</strong></p>
                    <p>To empower learners by providing high-quality educational tools and materials, and to encourage continuous self-learning.</p>
                    <p><strong>Our Vision:</strong></p>
                    <p>To be the leading destination for smart learning in the region, and to contribute to building an advanced knowledge-based society.</p>
                    <p>We are a team of developers and educators passionate about delivering the best possible learning experience.</p>
                `,
                contactUsTitle: "Contact Us",
                contactUsContent: `
                    <p>We are happy to hear from you! If you have any questions, suggestions, or inquiries, please do not hesitate to contact us through the following channels:</p>
                    <ul>
                        <li><strong>Email:</strong> <a href="mailto:Bebo.naiem13@gmail.com">Bebo.naiem13@gmail.com</a></li>
                    </ul>
                    <p>You can also follow us on social media (placeholder links):</p>
                    <ul>
                        <li><a href="#" target="_blank" rel="noopener noreferrer">Facebook</a></li>
                        <li><a href="#" target="_blank" rel="noopener noreferrer">Twitter</a></li>
                        <li><a href="#" target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
                    </ul>
                `,
                termsConditionsTitle: "Terms & Conditions",
                termsConditionsContent: `
                    <p>Welcome to the Smart Learning Portal. By using this platform, you agree to comply with and be bound by the following terms and conditions:</p>
                    <p><strong>1. Acceptance of Terms:</strong></p>
                    <p>Your use of the platform constitutes your full acceptance of these terms. If you do not agree with any part of these terms, you must not use the platform.</p>
                    <p><strong>2. Use of the Platform:</strong></p>
                    <ul>
                        <li>You must use the platform for educational and lawful purposes only.</li>
                        <li>You are responsible for maintaining the confidentiality of any login information (if available).</li>
                        <li>You may not use the platform in a way that could damage it or disrupt its services.</li>
                    </ul>
                    <p><strong>3. Content:</strong></p>
                    <p>All educational materials and content on the platform are protected by copyright and trademarks. You may not copy, distribute, or modify any content without explicit permission.</p>
                    <p><strong>4. Disclaimer:</strong></p>
                    <p>The content is provided "as is" without any warranties. We do not guarantee the accuracy, completeness, or suitability of the information and materials on the platform for any particular purpose.</p>
                    <p><strong>5. Limitation of Liability:</strong></p>
                    <p>We will not be liable for any direct or indirect damages arising from your use or inability to use the platform.</p>
                    <p><strong>6. Amendments to Terms:</strong></p>
                    <p>We reserve the right to amend these terms at any time. Your continued use of the platform after any amendments signifies your acceptance of the modified terms.</p>
                    <p><em>Last updated: [Enter Today's Date]</em></p>
                `,
                linkPrivacyPolicy: "Privacy Policy",
                linkAboutUs: "About Us",
                linkContactUs: "Contact Us",
                linkTermsConditions: "Terms & Conditions",
                navHome: "Home",
                navDepartments: "Departments",
                toggleNavigation: "Toggle navigation"
            }
        };

        // --- Department Data ---
        const departmentsData = [
            {
                id: "specific-edu", icon: "ğŸ“",
                name: { ar: "ÙƒÙ„ÙŠØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ù†ÙˆØ¹ÙŠØ©", en: "Faculty of Specific Education" },
                subjects: [
                    { name: { ar: "Ø§Ù„Ø¥Ø°Ø§Ø¹Ø© ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©", en: "Radio & Audio Recordings" }, code: "MED101", icon: "ğŸ™ï¸" },
                    { name: { ar: "Ø·Ø±Ù‚ Ø§Ù„ØªØ¯Ø±ÙŠØ³ Ø¹Ø§Ù…Ø©", en: "General Teaching Methods" }, code: "EDU201", icon: "ğŸ“š" },
                    { name: { ar: "ØªÙ†Ù…ÙŠØ© Ù…Ù‡Ø§Ø±Ø§Øª Ø°Ø§ØªÙŠÙ‡", en: "Self-Development Skills" }, code: "SKL301", icon: "ğŸŒŸ" },
                    { name: { ar: "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", en: "Introduction to E-Learning" }, code: "ELE401", icon: "ğŸ’»" }
                ]
            }
        ];

        // --- DOM Elements ---
        const htmlEl = document.documentElement;
        const bodyEl = document.body;
        const languageSelect = document.getElementById('languageSelect');
        const startExploringBtn = document.getElementById('startExploringBtn');
        const mainContentArea = document.getElementById('mainContent');
        const departmentsListContainer = document.getElementById('departmentsListContainer');
        const mainSearchInput = document.getElementById('mainSearchInput');
        const placeholderOverlay = document.getElementById('placeholderOverlay');
        const placeholderContentDiv = document.getElementById('placeholderContent');
        const clearSearchBtn = document.getElementById('clearSearchBtn');
        const searchIconContainer = document.getElementById('searchIconContainer');
        const navToggleButton = document.querySelector('.nav-toggle-button');
        const mainNavList = document.getElementById('mainNavList');
        let navMobileOverlay;
        let departmentsRendered = false;

        // --- Language Initialization ---
        let currentLanguage = localStorage.getItem('portalLanguage');
        if (!currentLanguage || !supportedLanguages[currentLanguage]) {
            const browserLangFull = navigator.language || navigator.userLanguage || 'ar'; 
            const browserLangPrimary = browserLangFull.split('-')[0].toLowerCase(); 
            currentLanguage = supportedLanguages[browserLangPrimary] ? browserLangPrimary : 'ar';
            localStorage.setItem('portalLanguage', currentLanguage);
        }
        
        // --- Functions ---
        function populateLanguageSelector() {
            languageSelect.innerHTML = ''; 
            Object.keys(supportedLanguages).forEach(langCode => {
                const option = document.createElement('option');
                option.value = langCode;
                option.textContent = supportedLanguages[langCode].name;
                option.selected = langCode === currentLanguage;
                languageSelect.appendChild(option);
            });
        }

        function applyTranslations() {
            const langConfig = supportedLanguages[currentLanguage];
            const trans = translations[currentLanguage];

            htmlEl.lang = currentLanguage;
            htmlEl.dir = langConfig.dir;
            bodyEl.style.fontFamily = langConfig.font;
            document.title = trans.pageTitle;

            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                if (trans[key]) el.innerHTML = trans[key];
            });
            document.querySelectorAll('[data-translate-key-text]').forEach(el => {
                const key = el.dataset.translateKeyText;
                if (trans[key]) el.textContent = trans[key]; 
            });
            document.querySelectorAll('[data-translate-key-placeholder]').forEach(el => {
                const key = el.dataset.translateKeyPlaceholder;
                if (trans[key]) el.placeholder = trans[key];
            });
            
            clearSearchBtn.setAttribute('aria-label', trans.closeButton || 'Clear search'); 
            clearSearchBtn.setAttribute('title', trans.closeButton || 'Clear search');

            if (departmentsRendered) {
                renderDepartments(); 
                if (mainSearchInput.value) filterContent(); 
            }
        }
        
        function handleLanguageChange(event) {
            currentLanguage = event.target.value;
            localStorage.setItem('portalLanguage', currentLanguage); 
            applyTranslations();
            if (mainNavList && mainNavList.classList.contains('active')) { 
                toggleMobileNav(); 
                setTimeout(toggleMobileNav, 0); 
            }
        }

        function updateClearSearchBtn() {
            if (mainSearchInput.value) {
                clearSearchBtn.classList.add('visible');
                clearSearchBtn.style.display = 'flex'; 
            } else {
                clearSearchBtn.classList.remove('visible');
                clearSearchBtn.style.display = 'none';
            }
        }

        function renderDepartments(filteredData) {
            const lang = currentLanguage;
            const dataToRender = filteredData || departmentsData;

            departmentsListContainer.innerHTML = '';
            if (dataToRender.length === 0) {
                departmentsListContainer.innerHTML = `<p class="no-results-message">${translations[lang].noResults}</p>`;
                return;
            }

            dataToRender.forEach(dept => {
                const departmentCard = document.createElement('div');
                departmentCard.className = 'department-card';
                departmentCard.tabIndex = 0;
                departmentCard.setAttribute('role', 'region');
                departmentCard.setAttribute('aria-label', dept.name[lang]);

                const headerDiv = document.createElement('div');
                headerDiv.className = 'department-header';
                headerDiv.setAttribute('aria-expanded', 'false');
                headerDiv.setAttribute('aria-controls', `subjects-${dept.id}`);
                headerDiv.tabIndex = 0;
                headerDiv.setAttribute('role', 'button');
                headerDiv.setAttribute('aria-label', `${dept.name[lang]}`); 
                
                headerDiv.innerHTML = `
                    <h3><span class="dept-icon">${dept.icon || 'ğŸ“š'}</span> ${dept.name[lang]}</h3>
                    <span class="toggle-icon">${SVG_ICONS.chevronDown}</span>
                `;
                
                const subjectListUl = document.createElement('ul');
                subjectListUl.className = 'subject-list';
                subjectListUl.id = `subjects-${dept.id}`;

                if (dept.subjects && dept.subjects.length > 0) {
                    dept.subjects.forEach(subject => {
                        const subjectLi = document.createElement('li');
                        subjectLi.className = 'subject-item';
                        subjectLi.innerHTML = `<a href="#exam/${subject.code}" onclick="showExamSimulationPage('${subject.name[lang]}', '${subject.code}'); return false;"><span class="subject-icon">${subject.icon || 'ğŸ“–'}</span>${subject.name[lang]} (${subject.code})</a>`;
                        subjectListUl.appendChild(subjectLi);
                    });
                } else {
                     subjectListUl.innerHTML = `<li class="subject-item no-subjects-item" style="text-align:center; color:var(--text-light-secondary); border-left-color:transparent; border-right-color:transparent;">${translations[lang].noSubjects}</li>`;
                }

                departmentCard.appendChild(headerDiv);
                departmentCard.appendChild(subjectListUl);
                departmentsListContainer.appendChild(departmentCard);

                headerDiv.addEventListener('click', function() {
                    const isActive = this.classList.toggle('active');
                    this.setAttribute('aria-expanded', isActive.toString());
                });
                headerDiv.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
            departmentsRendered = true;
        }

        function filterContent() {
            const searchTerm = mainSearchInput.value.toLowerCase().trim();
            const displayData = departmentsData.map(dept => {
                const deptNameMatches = (dept.name.ar.toLowerCase().includes(searchTerm) || dept.name.en.toLowerCase().includes(searchTerm));
                const filteredSubjects = dept.subjects.filter(subject =>
                    (subject.name.ar.toLowerCase().includes(searchTerm) || subject.name.en.toLowerCase().includes(searchTerm) || subject.code.toLowerCase().includes(searchTerm))
                );
                if (deptNameMatches || filteredSubjects.length > 0) {
                    return { ...dept, subjects: (filteredSubjects.length > 0) ? filteredSubjects : (deptNameMatches ? dept.subjects : []) };
                }
                return null;
            }).filter(dept => dept !== null);

            renderDepartments(displayData);

            if (searchTerm) {
                document.querySelectorAll('.department-card').forEach(card => {
                    const header = card.querySelector('.department-header');
                    const subjectList = card.querySelector('.subject-list');
                    if (subjectList && subjectList.children.length > 0 ) { 
                        let hasRealSubjects = Array.from(subjectList.children).some(item => item.querySelector('a'));
                        if(hasRealSubjects && !header.classList.contains('active')) { 
                            header.classList.add('active'); 
                            header.setAttribute('aria-expanded', 'true');
                        }
                    }
                });
            }
        }
        
        window.showInfoPage = function(title, contentHTML, closeButtonTextKey = 'closeButton') {
            const lang = currentLanguage;
            const closeButtonLabel = translations[lang][closeButtonTextKey] || "Close";
            const closeIconHTML = SVG_ICONS.clear || '<i class="fas fa-times"></i>';
            placeholderContentDiv.innerHTML = `
                <button class="close-btn" onclick="hideInfoPage()" aria-label="${closeButtonLabel}" title="${closeButtonLabel}" tabindex="0">${closeIconHTML}</button>
                <h2 id="placeholderTitle">${title}</h2> 
                <div>${contentHTML}</div>
            `;
            const placeholderTitleEl = document.getElementById('placeholderTitle');
            if(placeholderTitleEl) placeholderTitleEl.classList.remove('visually-hidden');

            placeholderOverlay.classList.add('visible');
            document.body.style.overflow = 'hidden'; 
            setTimeout(() => {
                const closeBtn = placeholderContentDiv.querySelector('.close-btn');
                if (closeBtn) closeBtn.focus();
            }, 150); 
        }

        window.hideInfoPage = function() {
            placeholderOverlay.classList.remove('visible');
            document.body.style.overflow = ''; 
        }

        window.showExamSimulationPage = function(subjectName, subjectCode) {
            const lang = currentLanguage;
            const trans = translations[lang];
            const examLinks = {
                'MED101': { ar: 'https://learnfun.me/Faculty-of-Specific-Education/2/exam.html', en: 'https://learnfun.me/Faculty-of-Specific-Education/2/exam.html' },
                'EDU201': { ar: 'https://learnfun.me/Faculty-of-Specific-Education/31/exam.html', en: 'https://learnfun.me/Faculty-of-Specific-Education/31/exam.html' },
                'SKL301': { ar: 'https://learnfun.me/Faculty-of-Specific-Education/28/exam.html', en: 'https://learnfun.me/Faculty-of-Specific-Education/28/exam.html' },
                'ELE401': { ar: 'https://learnfun.me/Faculty-of-Specific-Education/24/exam.html', en: 'https://learnfun.me/Faculty-of-Specific-Education/24/exam.html' }
            };
            let exampleParagraph = lang === 'ar' ? 
                `<p>Ù‡Ø°Ù‡ ÙˆØ§Ø¬Ù‡Ø© ØªÙˆØ¶ÙŠØ­ÙŠØ©. ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙØ¹Ù„ÙŠØŒ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù‡Ù†Ø§.</p><p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª ${subjectName} Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ§Ù„ÙŠ:</p><p><a href="${examLinks[subjectCode]?.[lang] || '#'}" class="exam-link">Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª ${subjectName}</a></p>` : 
                `<p>This is a demonstrative interface. In a real application, exam questions would be displayed here.</p><p>You can access ${subjectName} exams through the following link:</p><p><a href="${examLinks[subjectCode]?.[lang] || '#'}" class="exam-link">Go to ${subjectName} Exams</a></p>`;

            const examContent = `
                <p>${trans.examModalIntro}<strong>${subjectName} (${subjectCode})</strong>.</p>
                ${exampleParagraph}
                <div style="margin-top: 25px; padding: 20px; border: 1px dashed var(--border-color); border-radius: var(--border-radius-md); background-color: #1f1f35;">
                    <h4>${trans.examModalInstructionsTitle}</h4>
                    <ul>
                        <li>${trans.examModalInstruction1}</li>
                        <li>${trans.examModalInstruction2}</li>
                        <li>${trans.examModalInstruction3}</li>
                    </ul>
                    <button onclick="window.location.href='${examLinks[subjectCode]?.[lang] || '#'}'" style="margin-top:20px; padding: 12px 25px; background-color: var(--accent-success); color:white; border:none; border-radius:var(--border-radius-sm); cursor:pointer; font-size:1em; transition: background-color var(--transition-fast);">${trans.examModalStartButton}</button>
                </div>
            `;
            showInfoPage(`${trans.examModalTitlePrefix}${subjectName}`, examContent);
            setTimeout(() => {
                const startSimButton = placeholderContentDiv.querySelector('button[onclick*="window.location.href"]');
                if(startSimButton) {
                    const originalBg = getComputedStyle(startSimButton).backgroundColor;
                    startSimButton.onmouseover = () => startSimButton.style.backgroundColor = '#0E8A60'; 
                    startSimButton.onmouseout = () => startSimButton.style.backgroundColor = originalBg;
                }
            }, 0);
        }

        window.showStaticPage = function(pageKey) {
            const lang = currentLanguage;
            const trans = translations[lang];
            const titleKey = `${pageKey}Title`;
            const contentKey = `${pageKey}Content`;

            if (trans[titleKey] && trans[contentKey]) {
                const pageTitle = trans[titleKey];
                const today = new Date();
                const formattedDate = lang === 'ar' ? 
                    `${today.getDate()}/${String(today.getMonth() + 1).padStart(2, '0')}/${today.getFullYear()}` : 
                    `${String(today.getMonth() + 1).padStart(2, '0')}/${String(today.getDate()).padStart(2, '0')}/${today.getFullYear()}`;
                
                let pageContent = trans[contentKey].replace(/\[Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…\]|\[Enter Today's Date\]/gi, formattedDate);
                showInfoPage(pageTitle, pageContent);
                const closeBtn = placeholderContentDiv.querySelector('.close-btn');
                if (closeBtn) {
                    closeBtn.removeEventListener('keydown', handleModalCloseKeydown); 
                    closeBtn.addEventListener('keydown', handleModalCloseKeydown);
                }
            } else {
                console.error(`Translations not found for page: ${pageKey} in language: ${lang}`);
                showInfoPage(translations[lang].errorTitle || "Error", translations[lang].errorContent || "<p>Content not available.</p>");
            }
        }
        function handleModalCloseKeydown(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                hideInfoPage();
            }
        }
        
        function initializeIcons() {
            if (searchIconContainer) searchIconContainer.innerHTML = SVG_ICONS.search;
            if (clearSearchBtn) clearSearchBtn.innerHTML = SVG_ICONS.clear;
        }

        function createMobileOverlay() {
            if (document.querySelector('.nav-mobile-overlay')) return; 
            navMobileOverlay = document.createElement('div');
            navMobileOverlay.className = 'nav-mobile-overlay';
            document.body.appendChild(navMobileOverlay);
            navMobileOverlay.addEventListener('click', toggleMobileNav);
        }

        function toggleMobileNav() {
            const isActive = mainNavList.classList.toggle('active');
            navToggleButton.setAttribute('aria-expanded', isActive.toString());
            const openIcon = navToggleButton.querySelector('.fa-bars');
            const closeIcon = navToggleButton.querySelector('.fa-times');
            if (openIcon && closeIcon) {
                openIcon.style.display = isActive ? 'none' : 'inline';
                closeIcon.style.display = isActive ? 'inline' : 'none';
            }
            if (navMobileOverlay) navMobileOverlay.classList.toggle('active', isActive);
            document.body.style.overflow = isActive ? 'hidden' : '';
            if (!isActive) document.body.style.overflow = '';
        }

        // --- Event Listeners ---
        languageSelect.addEventListener('change', handleLanguageChange);
        startExploringBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const targetElement = document.getElementById('mainContent');
            if(targetElement) targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
        mainSearchInput.addEventListener('input', () => { updateClearSearchBtn(); filterContent(); });
        clearSearchBtn.addEventListener('click', () => { mainSearchInput.value = ''; updateClearSearchBtn(); filterContent(); mainSearchInput.focus(); });
        mainSearchInput.addEventListener('focus', updateClearSearchBtn);
        placeholderOverlay.addEventListener('click', (e) => { if (e.target === placeholderOverlay) hideInfoPage(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && placeholderOverlay.classList.contains('visible')) hideInfoPage(); });
        document.querySelectorAll('.footer-links a').forEach(link => {
            link.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); }});
        });

        if (navToggleButton && mainNavList) {
            createMobileOverlay();
            navToggleButton.addEventListener('click', toggleMobileNav);
            mainNavList.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => { if (mainNavList.classList.contains('active')) toggleMobileNav(); });
            });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && mainNavList.classList.contains('active')) toggleMobileNav(); });
        }

        // --- Initial Load ---
        initializeIcons();
        populateLanguageSelector(); 
        applyTranslations(); 
        renderDepartments(); 
        updateClearSearchBtn();
    </script>
</body>
</html>
